<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:task="http://www.springframework.org/schema/task"
	xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
		http://www.springframework.org/schema/beans 
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context 
		http://www.springframework.org/schema/context/spring-context.xsd
		http://www.springframework.org/schema/util 
		http://www.springframework.org/schema/util/spring-util.xsd
		http://www.springframework.org/schema/task
        http://www.springframework.org/schema/task/spring-task-4.2.xsd
		">



	<context:component-scan base-package="com.xii" />
	<mvc:default-servlet-handler />

	<mvc:annotation-driven />
	
	

	<mvc:interceptors>

		<mvc:interceptor>
			<mvc:mapping path="/**" />
			<bean id="localeChangeInterceptor"
				class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
				<property name="paramName" value="lang" />
			</bean>

		</mvc:interceptor>

		<mvc:interceptor>
			<mvc:mapping path="/**/*" />

			<mvc:exclude-mapping path="/**/*" />
			<mvc:exclude-mapping path="/robots.txt" />
			
<!-- 			<mvc:exclude-mapping path="/auth/loginUser*" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/insertUser*" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/getSession.json" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/auth*" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/confirmation*" /> -->
<!-- 			<mvc:exclude-mapping -->
<!-- 				path="/auth/requestConfirmMail*" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/findPassword*" /> -->
<!-- 			<mvc:exclude-mapping path="/auth/getUserByEmail*" /> -->


<!-- 			<mvc:exclude-mapping path="/user/findPassword*" /> -->

<!-- 			<mvc:exclude-mapping path="/util/*" /> -->
<!-- 			<mvc:exclude-mapping path="/news/*" /> -->

<!-- 			<mvc:exclude-mapping path="/main/*" /> -->
<!-- 			<mvc:exclude-mapping path="/term/*" /> -->

<!-- 			<mvc:exclude-mapping path="/header" /> -->
<!-- 			<mvc:exclude-mapping path="/footer" /> -->
<!-- 			<mvc:exclude-mapping path="/register/**" /> -->
<!-- 			<mvc:exclude-mapping path="/login" /> -->
<!-- 			<mvc:exclude-mapping path="/data/tab" /> -->
<!-- 			<mvc:exclude-mapping path="/data/list" /> -->
<!-- 			<mvc:exclude-mapping path="/data/getDataList*" /> -->
<!-- 			<mvc:exclude-mapping path="/faq/**" /> -->
<!-- 			<mvc:exclude-mapping path="/contact/**" /> -->
<!-- 			<mvc:exclude-mapping path="/news/**" /> -->
<!-- 			<mvc:exclude-mapping path="/service/**" /> -->
<!-- 			<mvc:exclude-mapping path="/test/**" /> -->

<!-- 			<mvc:exclude-mapping path="/admin/logout*" /> -->

<!-- 			<mvc:exclude-mapping path="/resources/**/" /> -->
<!-- 			<mvc:exclude-mapping path="/css/**/" /> -->
<!-- 			<mvc:exclude-mapping path="/js/**/" /> -->
<!-- 			<mvc:exclude-mapping path="/images/**/" /> -->
<!-- 			<mvc:exclude-mapping path="/files/**/" /> -->
<!-- 			<mvc:exclude-mapping path="/admin/**" /> -->


			<bean class="com.xii.auth.LoginCheckIntercepter" />
		</mvc:interceptor>

	</mvc:interceptors>




	<mvc:resources mapping="/resources/**" location="/resources/" />
	<mvc:resources mapping="/css/**" location="/resources/css/" />
	<mvc:resources mapping="/js/**" location="/resources/js/" />
	<mvc:resources mapping="/images/**" location="/resources/images/" />
	<mvc:resources mapping="/robots.txt" location="/resources/robots.txt" />	
	<mvc:resources mapping="/sitemap.xml" location="/resources/sitemap.xml" />	

	<task:annotation-driven />


	<bean id="multipartResolver"
		class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />

	<bean
		class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
		<property name="contentNegotiationManager">
			<bean id="contentNegotiationManager"
				class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
				<property name="mediaTypes">
					<map>
						<entry key="atom" value="application/atom+xml" />
						<entry key="html" value="text/html" />
						<entry key="jsp" value="text/html" />
						<entry key="json" value="application/json" />
					</map>
				</property>
			</bean>
		</property>

		<property name="viewResolvers">
			<list>
				<bean
					class="org.springframework.web.servlet.view.BeanNameViewResolver">
					<property name="order">
						<value>1</value>
					</property>
				</bean>
				<bean
					class="org.springframework.web.servlet.view.InternalResourceViewResolver">
					<property name="exposeContextBeansAsAttributes" value="true" />
					<property name="prefix" value="/WEB-INF/view/" />
					<property name="suffix" value=".jsp" />
					<property name="cache" value="false" />
					<property name="order">
						<value>0</value>
					</property>
				</bean>
			</list>
		</property>
		<property name="defaultViews">
			<list>
				<bean
					class="org.springframework.web.servlet.view.json.MappingJackson2JsonView">
				</bean>
			</list>
		</property>
	</bean>


	<util:properties id="globalProperty"
		location="classpath:global.properties" />

</beans>
